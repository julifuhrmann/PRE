<div class="card-party">
  <%= cl_image_tag @party.photo.key %>
    <div class="card-party-infos">
      <div>
        <div>
          <h2 class="card-party-date"><%= @party.date.strftime("%^a, %d %^b") %></h2>
          <h1><%= @party.name %></h1>
        </div>
        <p><%= @party.description %></p>
      </div>
      <%= link_to user_path  do %>
        <%= cl_image_tag @party.user.avatar.key, class: "card-party-user avatar-bordered" %>
      <% end %>
    </div>
  </div>
</div>

  <%# simpleform for the join request. If a request exists show cancel button  %>
  <% if @party.requests.where(user: current_user).exists? %>
    <%= link_to "Cancel request",
        party_request_path(@party, @request),
        data: {turbo_method: :delete, turbo_confirm: "Are you sure?"},
        class: "btn-static" %>
  <% else %>
    <%= simple_form_for([@party, @request]) do |f| %>
    <%= f.button :submit, "Join in!",
                          class: "btn-join" %>
    <% end %>
  <% end %>

  <%# BUTTON TO MESSAGE HOST %>
    <%# <%= link_to @party.user.username, user_chatrooms_path(@party.user),
      data: { turbo_method: :post } %>
<%# TODO implement address to map if user join request accepted  %>

<%# if current_user.request.status == 1  %>
  <p><%#= @party.address  %></p>
<%# end %>
